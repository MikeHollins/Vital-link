<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIG. 7: Edge and Mobile Proof Generation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #ffffff;
        }
        .container-block {
            fill: none;
            stroke: black;
            stroke-width: 1.5;
        }
        .device-block, .engine-block, .proof-block, .blockchain-block {
            fill: white;
            stroke: black;
            stroke-width: 1;
        }
        .label {
            font-size: 14px;
            font-weight: 500;
            text-anchor: middle;
            dominant-baseline: central;
            pointer-events: none;
            fill: black;
        }
        .title-label {
            font-size: 16px;
            font-weight: 600;
            text-anchor: middle;
            fill: black;
        }
        .arrow-line {
            stroke: black;
            stroke-width: 1.5;
            fill: none;
        }
        .deferred-arrow-line {
            stroke: black;
            stroke-width: 1.5;
            fill: none;
            stroke-dasharray: 8 5;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="p-6 sm:p-8 rounded-lg w-full max-w-5xl">
        <!-- SVG container for the diagram -->
        <svg id="edge-diagram-revised" viewBox="0 0 900 600" preserveAspectRatio="xMidYMid meet" class="w-full h-full" aria-labelledby="diagramTitle">
            <title id="diagramTitle">FIG. 7: Edge and Mobile Proof Generation</title>
            
            <!-- Define arrowhead marker -->
            <defs>
                <marker id="arrowhead" viewBox="0 0 10 10" refX="8" refY="5"
                    markerWidth="6" markerHeight="6" orient="auto-start-reverse">
                    <path d="M 0 0 L 10 5 L 0 10 z" fill="black" />
                </marker>
            </defs>

            <!-- Diagram Title -->
            <text x="450" y="40" class="title-label">FIG. 7: Edge and Mobile Proof Generation</text>

            <!-- Local Edge Environment Container -->
            <rect x="50" y="100" width="500" height="450" rx="8" class="container-block" />
            <text x="300" y="125" class="label" style="font-weight: 600;">Local Edge Environment</text>

            <!-- Devices -->
            <g>
                <rect x="100" y="170" width="160" height="60" rx="30" class="device-block"/>
                <text x="180" y="200" class="label">Wearable Sensor (710)</text>
            </g>
            <g>
                <rect x="100" y="370" width="160" height="80" rx="10" class="device-block"/>
                <text x="180" y="410" class="label">Smartphone (720)</text>
            </g>

            <!-- ZK Proof Engine -->
            <rect x="300" y="270" width="200" height="80" rx="4" class="engine-block"/>
            <text x="400" y="310" class="label">
                <tspan x="400" dy="-0.6em">Lightweight</tspan>
                <tspan x="400" dy="1.2em">ZK Proof Engine (730)</tspan>
            </text>

            <!-- Arrows from Devices to Engine -->
            <path d="M 260 200 H 290 L 340 260" class="arrow-line" marker-end="url(#arrowhead)"/>
            <path d="M 260 410 H 290 L 340 360" class="arrow-line" marker-end="url(#arrowhead)"/>

            <!-- Locally Generated Proof -->
            <g>
                 <!-- Document Icon -->
                <path d="M 360 420 L 360 480 L 440 480 L 440 440 L 420 420 Z" class="proof-block"/>
                <path d="M 420 420 L 420 440 L 440 440" fill="none" stroke="black" stroke-width="1"/>
                <text x="400" y="510" class="label">
                    <tspan x="400" dy="-0.6em">Locally Generated</tspan>
                    <tspan x="400" dy="1.2em">Proof</tspan>
                </text>
            </g>
            
            <!-- Arrow from Engine to Proof -->
            <path d="M 400 350 V 410" class="arrow-line" marker-end="url(#arrowhead)"/>
            
            <!-- Blockchain Ledger -->
            <g transform="translate(750, 300) scale(0.7)">
                <circle cx="0" cy="0" r="80" class="blockchain-block"/>
                <path d="M-20 -35 L-20 35 L0 45 L20 35 L20 -35 L0 -45 Z" class="blockchain-block"/>
                <path d="M-10 -15 L-10 15 L0 20 L10 15 L10 -15 L0 -20 Z" fill="white"/>
            </g>
            <text x="750" y="370" class="label">Blockchain Ledger</text>
            
            <!-- Deferred Anchoring Arrow -->
            <path d="M 550 310 H 694" class="deferred-arrow-line" marker-end="url(#arrowhead)"/>
            <text x="622" y="285" class="label">
                <tspan x="622" dy="-0.6em">Deferred Anchoring</tspan>
                <tspan x="622" dy="1.2em">(760, 770)</tspan>
            </text>

        </svg>
    </div>
</body>
</html>
