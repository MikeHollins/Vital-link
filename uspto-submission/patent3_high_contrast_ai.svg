<?xml version="1.0" encoding="UTF-8"?>
<svg width="1000" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="headerGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#4F46E5;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7C3AED;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="engineGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#E0E7FF;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#F3E8FF;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="stepGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FFFFFF;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#F8FAFC;stop-opacity:1" />
    </linearGradient>
  </defs>
  
  <!-- Background -->
  <rect width="1000" height="800" fill="#F8FAFC"/>
  
  <!-- Title -->
  <rect x="50" y="20" width="900" height="60" rx="15" fill="url(#headerGradient)"/>
  <text x="500" y="55" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="white">
    Figure 4: AI-Powered Health Data Normalization Engine
  </text>
  
  <!-- Input Data Section -->
  <g id="inputData">
    <rect x="50" y="120" width="150" height="300" rx="10" fill="#E5E7EB" stroke="#9CA3AF" stroke-width="2"/>
    <text x="125" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Raw Data</text>
    
    <!-- Input data items -->
    <rect x="60" y="160" width="130" height="25" rx="5" fill="white" stroke="#D1D5DB"/>
    <text x="125" y="176" text-anchor="middle" font-family="Arial, sans-serif" font-size="11">Multi-Platform Data</text>
    
    <rect x="60" y="195" width="130" height="25" rx="5" fill="white" stroke="#D1D5DB"/>
    <text x="125" y="211" text-anchor="middle" font-family="Arial, sans-serif" font-size="11">Steps, Heart Rate</text>
    
    <rect x="60" y="230" width="130" height="25" rx="5" fill="white" stroke="#D1D5DB"/>
    <text x="125" y="246" text-anchor="middle" font-family="Arial, sans-serif" font-size="11">Sleep Data</text>
    
    <rect x="60" y="265" width="130" height="25" rx="5" fill="white" stroke="#D1D5DB"/>
    <text x="125" y="281" text-anchor="middle" font-family="Arial, sans-serif" font-size="11">Activity Apps</text>
    
    <rect x="60" y="300" width="130" height="25" rx="5" fill="white" stroke="#D1D5DB"/>
    <text x="125" y="316" text-anchor="middle" font-family="Arial, sans-serif" font-size="11">Wearable Data</text>
    
    <rect x="60" y="335" width="130" height="25" rx="5" fill="white" stroke="#D1D5DB"/>
    <text x="125" y="351" text-anchor="middle" font-family="Arial, sans-serif" font-size="11">IoT Platforms</text>
  </g>
  
  <!-- Arrow from Input to Engine -->
  <path d="M 210 270 L 250 270" stroke="#4B5563" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- AI Normalization Engine -->
  <g id="aiEngine">
    <rect x="270" y="120" width="350" height="350" rx="15" fill="url(#engineGradient)" stroke="#4F46E5" stroke-width="3"/>
    <text x="445" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#4F46E5">
      AI Normalization Engine
    </text>
    
    <!-- Step 1 -->
    <rect x="285" y="165" width="320" height="40" rx="8" fill="url(#stepGradient)" stroke="#10B981" stroke-width="2"/>
    <text x="295" y="181" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#065F46">Step 1: Schema Detection</text>
    <text x="295" y="195" font-family="Arial, sans-serif" font-size="10" fill="#374151">ML model identifies data structure and field mappings</text>
    
    <!-- Step 2 -->
    <rect x="285" y="215" width="320" height="40" rx="8" fill="url(#stepGradient)" stroke="#8B5CF6" stroke-width="2"/>
    <text x="295" y="231" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#5B21B6">Step 2: Semantic Analysis</text>
    <text x="295" y="245" font-family="Arial, sans-serif" font-size="10" fill="#374151">NLP processing determines field meaning and units</text>
    
    <!-- Step 3 -->
    <rect x="285" y="265" width="320" height="40" rx="8" fill="url(#stepGradient)" stroke="#F59E0B" stroke-width="2"/>
    <text x="295" y="281" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#92400E">Step 3: Unit Conversion</text>
    <text x="295" y="295" font-family="Arial, sans-serif" font-size="10" fill="#374151">Automatic conversion to standardized units</text>
    
    <!-- Step 4 -->
    <rect x="285" y="315" width="320" height="40" rx="8" fill="url(#stepGradient)" stroke="#EF4444" stroke-width="2"/>
    <text x="295" y="331" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#DC2626">Step 4: Data Validation</text>
    <text x="295" y="345" font-family="Arial, sans-serif" font-size="10" fill="#374151">Statistical analysis for outlier detection</text>
    
    <!-- Step 5 -->
    <rect x="285" y="365" width="320" height="40" rx="8" fill="url(#stepGradient)" stroke="#06B6D4" stroke-width="2"/>
    <text x="295" y="381" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#0891B2">Step 5: Quality Scoring</text>
    <text x="295" y="395" font-family="Arial, sans-serif" font-size="10" fill="#374151">Confidence metrics and reliability assessment</text>
    
    <!-- Step 6 - Now clearly visible -->
    <rect x="285" y="415" width="320" height="40" rx="8" fill="url(#stepGradient)" stroke="#EC4899" stroke-width="2"/>
    <text x="295" y="431" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#BE185D">Step 6: Output Generation</text>
    <text x="295" y="445" font-family="Arial, sans-serif" font-size="10" fill="#374151">Unified health data format with metadata</text>
  </g>
  
  <!-- Arrow from Engine to Output -->
  <path d="M 630 295 L 670 295" stroke="#4B5563" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>
  
  <!-- Output Data Section -->
  <g id="outputData">
    <rect x="690" y="120" width="150" height="300" rx="10" fill="#E5E7EB" stroke="#9CA3AF" stroke-width="2"/>
    <text x="765" y="145" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Normalized Output</text>
    
    <!-- Output data items -->
    <rect x="700" y="160" width="130" height="25" rx="5" fill="white" stroke="#D1D5DB"/>
    <text x="765" y="176" text-anchor="middle" font-family="Arial, sans-serif" font-size="11">Unified Schema</text>
    
    <rect x="700" y="195" width="130" height="25" rx="5" fill="white" stroke="#D1D5DB"/>
    <text x="765" y="211" text-anchor="middle" font-family="Arial, sans-serif" font-size="11">Standard Units</text>
    
    <rect x="700" y="230" width="130" height="25" rx="5" fill="white" stroke="#D1D5DB"/>
    <text x="765" y="246" text-anchor="middle" font-family="Arial, sans-serif" font-size="11">Metadata Tags</text>
    
    <rect x="700" y="265" width="130" height="25" rx="5" fill="white" stroke="#D1D5DB"/>
    <text x="765" y="281" text-anchor="middle" font-family="Arial, sans-serif" font-size="11">Quality Scores</text>
    
    <rect x="700" y="300" width="130" height="25" rx="5" fill="white" stroke="#D1D5DB"/>
    <text x="765" y="316" text-anchor="middle" font-family="Arial, sans-serif" font-size="11">Validated Data</text>
    
    <rect x="700" y="335" width="130" height="25" rx="5" fill="white" stroke="#D1D5DB"/>
    <text x="765" y="351" text-anchor="middle" font-family="Arial, sans-serif" font-size="11">Confident Output</text>
  </g>
  
  <!-- AI Engine Technical Specifications - Properly positioned below -->
  <rect x="50" y="500" width="790" height="120" rx="10" fill="#F3F4F6" stroke="#9CA3AF" stroke-width="2"/>
  <text x="445" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#374151">
    AI Engine Technical Specifications
  </text>
  
  <text x="70" y="545" font-family="Arial, sans-serif" font-size="12" fill="#374151">
    • Machine Learning: Transformer-based model for schema inference
  </text>
  <text x="70" y="565" font-family="Arial, sans-serif" font-size="12" fill="#374151">
    • NLP Pipeline: Advanced semantic analysis for field mapping
  </text>
  <text x="70" y="585" font-family="Arial, sans-serif" font-size="12" fill="#374151">
    • Statistical Validation: Multi-dimensional outlier detection
  </text>
  <text x="70" y="605" font-family="Arial, sans-serif" font-size="12" fill="#374151">
    • Performance: Real-time processing with 99.7% accuracy
  </text>
  
  <!-- Supported Platform Categories -->
  <rect x="50" y="650" width="790" height="100" rx="10" fill="#F9FAFB" stroke="#9CA3AF" stroke-width="2"/>
  <text x="445" y="675" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#374151">
    Supported Platform Categories
  </text>
  
  <text x="70" y="695" font-family="Arial, sans-serif" font-size="12" fill="#374151">
    • Fitness Trackers (Apple, Fitbit, Garmin, Samsung) • Medical Devices (Omron, Philips, ResMed)
  </text>
  <text x="70" y="715" font-family="Arial, sans-serif" font-size="12" fill="#374151">
    • Health Apps (MyFitnessPal, Strava, Sleep Cycle) • IoT Sensors (Smart scales, Blood pressure monitors)
  </text>
  <text x="70" y="735" font-family="Arial, sans-serif" font-size="12" fill="#374151">
    • Enterprise Health Platforms • Clinical Data Sources • Wearable Device APIs
  </text>
  
  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4B5563"/>
    </marker>
  </defs>
</svg>